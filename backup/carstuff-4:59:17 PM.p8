pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
Actor = {
  coords = {
    x = 0,
    y = 0
  },
  name = '',
  sprite = 0
}

function Actor:new(o)
  o = o or {}
  setmetatable(o, self)
  self.__index = self
  return o
end

function Actor:move(coords)
  self.coords.x = self.coords.x + coords.x
  self.coords.y = self.coords.y + coords.y
end

function Actor:draw()
		print(self.coords.x..','..self.coords.y, self.coords.x, self.coords.y + 10)
  spr(self.sprite, self.coords.x, self.coords.y)
end

function AddCoords(c1, c2)
  return {
    x = c1.x + c2.x,
    y = c1.y + c2.y
  }
end

function _init()
  -- track all the actors
  actors = {
    Actor:new({
      name = 'Player',
      sprite = 1,
    })
  }
end

function _update()
  local player = actors[1]
  local dir = { x = 0, y = 0}
  if(btn(0)) dir = AddCoords(dir, { x = -1, y = 0})
  if(btn(1)) dir = AddCoords(dir, { x = 1, y = 0})
  if(btn(2)) dir = AddCoords(dir, { x = 0, y = -1})
  if(btn(3)) dir = AddCoords(dir, { x = 0, y = 1})
  --print(dir.x..','..dir.y,10,10)
  player:move(dir)
end

function _draw()
		cls()
	 for k,v in pairs(actors) do
    v:draw()
  end
end
__gfx__
000000000aa77aa00000000a000000000000007007000000a00000000000000000000000aaaaaaaaa0a0a0a0000000000000000000000000a000000000000070
00000000077777700000000aa00000000000007007000000a00000000000000a0000000000000000000000000000000000000000777777770000000000000077
0000000007dddd700000000a000000000000007007000000a000000000000000000000000000000000000000000000000000000000000000a000000000000000
0000000007dddd700000000aa00000000000007007000000a00000000000000a0000000000000000000000000000000000000000000000000000000000000000
00000000077777700000000a000000000000007007000000a000000000000000000000000000000000000000000000000000000000000000a000000000000000
0000000007dddd700000000aa00000000000007007000000a00000000000000a0000000000000000000000000000000000000000000000000000000000000000
00000000088778800000000a000000000000007007000000a000000000000000000000000000000000000000000000007777777700000000a000000000000000
00000000066666600000000aa00000000000007007000000a00000000000000aa0a0a0a00000000000000000aaaaaaaa00000000000000000a0a0a0a00000000
070000000000000a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000050203040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000050203040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000050203040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000502030f0d0d0d0d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000005020e080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000051109090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000100c0c0c0c0c0c0c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100202b3502b3502a3502a3502a35029350293502835028350273502735026350253502535024350233502235021350203501e3501e3501d3501c3501c3501b3501b3501a3501a3501a3501a3501a3501a350
